// listen to touch events for mobile controls
document.addEventListener('touchstart', handleTouchStart, false);
document.addEventListener('touchmove', handleTouchMove, false);

let touchStartX = 0;
let touchStartY = 0;

function handleTouchStart(event) {
  touchStartX = event.touches[0].clientX;
  touchStartY = event.touches[0].clientY;
}

function handleTouchMove(event) {
  if (!touchStartX || !touchStartY) return;

  const touchEndX = event.touches[0].clientX;
  const touchEndY = event.touches[0].clientY;

  const deltaX = touchEndX - touchStartX;
  const deltaY = touchEndY - touchStartY;

  if (Math.abs(deltaX) > Math.abs(deltaY)) {
    // horizontal swipe
    if (deltaX > 0) {
      // swipe right
      moveTetrominoRight();
    } else {
      // swipe left
      moveTetrominoLeft();
    }
  } else {
    // vertical swipe
    if (deltaY > 0) {
      // swipe down
      dropTetromino();
    } else {
      // swipe up
      rotateTetromino();
    }
  }

  // reset touch start position
  touchStartX = 0;
  touchStartY = 0;
}
